"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[574],{9574:(_e,I,u)=>{u.r(I),u.d(I,{StoreManagerModule:()=>me});var a=u(6895),h=u(3060);class C{constructor(){this.pageNumber=1,this.pageSize=5}}var t=u(4650),g=u(2340),m=u(9646),p=u(4004),b=u(529);let y=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.N.apiUrl,this.categoryCache=new Map,this.subCategories=new Map}getAllCategories(e){const r=Object.values(e).join("-"),n=this.categoryCache.get(r);if(n)return(0,m.of)(n);const s={...e};return this.http.get(`${this.baseUrl}/categories`,{params:s}).pipe((0,p.U)(c=>(this.categoryCache.set(r,c),c)))}getCategoryById(e){const r=this.subCategories.get(e);return r?(0,m.of)(r):this.http.get(`${this.baseUrl}/categories/${e}`).pipe((0,p.U)(n=>{this.subCategories.set(n.parentId,n.subCategories)}))}getSubCategories(e){const r=this.subCategories.get(e);return r?(0,m.of)(r):this.http.get(`${this.baseUrl}/categories/${e}`).pipe((0,p.U)(n=>(this.subCategories.set(n.parentId,n),n)))}createCategory(e){return this.http.post(`${this.baseUrl}/categories`,e).pipe((0,p.U)(r=>r))}updateCategory(e,r){return this.http.put(`${this.baseUrl}/categories/${e}`,r)}deleteCategory(e){return this.http.delete(`${this.baseUrl}/categories/${e}`).pipe((0,p.U)(()=>{this.categoryCache.forEach((r,n)=>{r.items=r.items.filter(s=>s.id!=e)})}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var d=u(7185),l=u(4006),v=u(8101),F=u(3559);function P(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.label," is required ")}}function O(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",e.label," must be at least ",null==e.control.errors?null:e.control.errors.minlength.requiredLength," characters ")}}function $(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",e.label," can be at most ",null==e.control.errors?null:e.control.errors.maxlength.requiredLength," characters ")}}function L(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",e.label," must be at least ",null==e.control.errors?null:e.control.errors.min.min," ")}}function Y(o,i){1&o&&(t.TgZ(0,"mdb-error"),t._uU(1," Passwords do not match "),t.qZA())}function z(o,i){1&o&&(t.TgZ(0,"mdb-error"),t._uU(1," Category Name is already in use "),t.qZA())}function E(o,i){if(1&o&&(t.TgZ(0,"mdb-form-control"),t._UZ(1,"input",1),t.TgZ(2,"label",2),t._uU(3),t.qZA(),t.YNc(4,P,2,1,"mdb-error",0),t.YNc(5,O,2,2,"mdb-error",0),t.YNc(6,$,2,2,"mdb-error",0),t.YNc(7,L,2,2,"mdb-error",0),t.YNc(8,Y,2,0,"mdb-error",0),t.YNc(9,z,2,0,"mdb-error",0),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.s9C("id",e.label),t.s9C("type",e.inputType),t.Q6J("formControl",e.control),t.xp6(1),t.s9C("for",e.label),t.xp6(1),t.Oqu(e.label),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.required)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.minlength)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.maxlength)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.min)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.notMatching)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.categoryNameTaken)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched)))}}function H(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.label," is required ")}}function K(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",e.label," must be at least ",null==e.control.errors?null:e.control.errors.minlength.requiredLength," characters ")}}function D(o,i){if(1&o&&(t.TgZ(0,"mdb-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",e.label," can be at most ",null==e.control.errors?null:e.control.errors.maxlength.requiredLength," characters ")}}function G(o,i){if(1&o&&(t.TgZ(0,"mdb-form-control"),t._UZ(1,"textarea",3),t.TgZ(2,"label",2),t._uU(3),t.qZA(),t.YNc(4,H,2,1,"mdb-error",0),t.YNc(5,K,2,2,"mdb-error",0),t.YNc(6,D,2,2,"mdb-error",0),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.s9C("id",e.label),t.Q6J("formControl",e.control),t.xp6(1),t.s9C("for",e.label),t.xp6(1),t.Oqu(e.label),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.required)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.minlength)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched))),t.xp6(1),t.Q6J("ngIf",(null==e.control.errors?null:e.control.errors.maxlength)&&((null==e.control?null:e.control.dirty)||(null==e.control?null:e.control.touched)))}}let x=(()=>{class o{constructor(e){this.ngControl=e,this.label="",this.inputType="text",this.ngControl.valueAccessor=this}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.ngControl.control}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.a5,2))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-input"]],inputs:{label:"label",inputType:"inputType"},decls:2,vars:2,consts:[[4,"ngIf"],["mdbInput","","mdbValidate","",1,"form-control",3,"formControl","id","type"],["mdbLabel","",1,"form-label",3,"for"],["mdbInput","","mdbValidate","","rows","4",1,"form-control",2,"min-height","12rem",3,"formControl","id"]],template:function(e,r){1&e&&(t.YNc(0,E,10,11,"mdb-form-control",0),t.YNc(1,G,7,7,"mdb-form-control",0)),2&e&&(t.Q6J("ngIf","textarea"!==r.inputType),t.xp6(1),t.Q6J("ngIf","textarea"===r.inputType))},dependencies:[a.O5,v.Af,v.VP,v.o8,F.$J,F.pv,l.Fj,l.JJ,l.oH]}),o})();function V(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeCategory())}),t.qZA()}}function j(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",5)(2,"p",15),t._uU(3),t.qZA()(),t.TgZ(4,"td",5),t._UZ(5,"app-input",16),t.qZA(),t.TgZ(6,"td",5)(7,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.updateCategory(n.id))}),t._uU(8," Update "),t.qZA(),t.TgZ(9,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.edit.editMode=!1)}),t._uU(10," Cancel "),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw().$implicit,r=t.oxw(2);t.xp6(3),t.hij("Update Category: Id - ",e.id,""),t.xp6(2),t.Q6J("formControl",r.newCategoryName)}}function W(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",5)(1,"p",15),t._uU(2),t.qZA()(),t.TgZ(3,"td",5)(4,"p",15),t._uU(5),t.qZA()(),t.TgZ(6,"td",5)(7,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onViewSubCategoryClick(n))}),t._uU(8," View SubCategories "),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.editCategory(n.id))}),t._uU(10," Edit "),t.qZA(),t.TgZ(11,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.deleteCategory(n.id))}),t._uU(12," Delete "),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.Oqu(e.name)}}function X(o,i){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,j,11,2,"ng-container",13),t.YNc(2,W,13,2,"ng-template",null,14,t.W1O),t.qZA()),2&o){const e=i.$implicit,r=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.edit.editMode&&n.edit.id==e.id)("ngIfElse",r)}}function R(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20),t._UZ(2,"app-input",16),t.qZA(),t.TgZ(3,"div",21)(4,"button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.createCategory())}),t._uU(5," Create Category "),t.qZA(),t.TgZ(6,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.create.createMode=!1)}),t._uU(7," Cancel "),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("formControl",e.newCategoryName)}}function tt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.openNewCategoryForm())}),t._uU(1," Add New Category "),t.qZA()}}const et=function(o){return{loader:o}};function ot(o,i){if(1&o&&(t.ynx(0),t.YNc(1,X,4,2,"tr",8),t.TgZ(2,"tr",5)(3,"td",9),t._UZ(4,"div",10),t.qZA()(),t.TgZ(5,"tr",5)(6,"td",9),t.YNc(7,R,8,1,"div",11),t.YNc(8,tt,2,0,"button",12),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.categories),t.xp6(3),t.Q6J("ngClass",t.VKq(4,et,e.loading)),t.xp6(3),t.Q6J("ngIf",e.create.createMode),t.xp6(1),t.Q6J("ngIf",!e.create.createMode)}}let rt=(()=>{class o{constructor(e,r){this.categoryService=e,this.toastr=r,this.viewSubCategory=new t.vpe,this.close=new t.vpe,this.categories=[],this.heading="",this.parentId=0,this.edit={editMode:!1,id:0},this.create={createMode:!1},this.newCategoryName=new l.NI("",l.kI.required),this.loading=!1}editCategory(e){this.openEditCategoryForm(e),this.categories&&(this.categories=this.categories.map(r=>(r.id==e&&this.newCategoryName.setValue(r.name),r)))}updateCategory(e){this.newCategoryName.value&&(this.categoryService.updateCategory(e,{id:e,name:this.newCategoryName.value}).subscribe({next:n=>{this.categories&&(this.categories=this.categories.map(s=>(s.id==n.id&&(s.name=n.name),s)))},error:n=>{this.toastr.error(n.error.errorMessage)}}),this.edit={id:e,editMode:!1})}createCategory(){if(this.newCategoryName.value){const e={name:this.newCategoryName.value};this.parentId&&(e.parentId=this.parentId),this.categoryService.createCategory(e).subscribe({next:r=>{const n={...r};this.categories.push(r),this.create.createMode=!1,this.toastr.success(`'${n.name}' Added to Categories`,"Category Added")},error:r=>{this.newCategoryName.setErrors({categoryNameTaken:!0})}})}}deleteCategory(e){this.categoryService.deleteCategory(e).subscribe({next:()=>{this.categories=this.categories.filter(r=>r.id!=e?r:(this.toastr.error(`'${r.name}' Deleted from Categories`,"Category Deleted"),null))},error:r=>{this.toastr.error(r.error.errorMessage)}})}openNewCategoryForm(){this.create={createMode:!0},this.edit={editMode:!1,id:0},this.newCategoryName.setValue("")}openEditCategoryForm(e){this.edit={editMode:!0,id:e},this.create={createMode:!1}}onViewSubCategoryClick(e){this.viewSubCategory.emit(e)}closeCategory(){this.close.emit(this.heading)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-table"]],inputs:{categories:"categories",heading:"heading",parentId:"parentId",loading:"loading"},outputs:{viewSubCategory:"viewSubCategory",close:"close"},decls:17,vars:3,consts:[[1,"h3","mb-4"],["class","fas fa-window-close text-danger",3,"click",4,"ngIf"],[1,"hr","hr-blurry"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[1,"text-center"],[4,"ngIf"],[1,"fas","fa-window-close","text-danger",3,"click"],[4,"ngFor","ngForOf"],["colspan","3"],[3,"ngClass"],["class","row text-center",4,"ngIf"],["type","button","class","btn btn-link  btn-rounded",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"fw-normal","mb-1"],["label","Category Name",3,"formControl"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded",3,"click"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded","text-danger",3,"click"],[1,"row","text-center"],[1,"col-8"],[1,"col-4"],["type","button",1,"btn","btn-link","btn-rounded",3,"click"],["type","button",1,"btn","btn-link","btn-rounded","text-danger",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.YNc(2,V,1,0,"i",1),t.qZA(),t._UZ(3,"hr",2),t.TgZ(4,"div")(5,"table",3)(6,"thead",4)(7,"tr")(8,"th",5),t._uU(9,"Id"),t.qZA(),t.TgZ(10,"th",5),t._uU(11,"Name"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"Actions "),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,ot,9,6,"ng-container",6),t.qZA()()(),t._UZ(16,"hr",2)),2&e&&(t.xp6(1),t.hij(" ",r.heading," "),t.xp6(1),t.Q6J("ngIf","Categories"!==r.heading),t.xp6(13),t.Q6J("ngIf",r.categories))},dependencies:[a.mk,a.sg,a.O5,l.JJ,l.oH,x],styles:["i[_ngcontent-%COMP%]{cursor:pointer}i[_ngcontent-%COMP%]:hover{opacity:.9}"]}),o})();function nt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"app-category-table",3),t.NdJ("viewSubCategory",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onViewSubCategoryClick(n))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("categories",e.categories.items)}}function it(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-category-table",4),t.NdJ("close",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.closeSubCategory(n))})("viewSubCategory",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onViewSubCategoryClick(n))}),t.qZA(),t.BQk()}if(2&o){const e=i.$implicit;t.xp6(1),t.s9C("heading",e.heading),t.Q6J("categories",e.subCategories)("loading",e.loading)("parentId",e.parentId)}}const st=function(o){return{loader:o}};let lt=(()=>{class o{constructor(e,r){this.categoryService=e,this.toastr=r,this.paginationParams=new C,this.subCategories=[]}ngOnInit(){this.getCategories()}getCategories(){this.paginationParams.pageSize=48,this.categoryService.getAllCategories(this.paginationParams).subscribe({next:e=>{this.categories=e,this.categories&&(this.categories.pageSize=e.items.length)}})}onViewSubCategoryClick(e){const r=`Sub-Categories of ${e.name}`;this.subCategories=[...this.subCategories,{heading:r,subCategories:[],loading:!0,parentId:0}],this.categoryService.getSubCategories(e.id).subscribe({next:n=>{this.subCategories=this.subCategories.map(s=>(s.heading===r&&(s.subCategories=n?.subCategories,s.loading=!1,s.parentId=n?.id),s))}})}closeSubCategory(e){this.subCategories=this.subCategories.filter(r=>r.heading!==e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-list"]],decls:3,vars:5,consts:[[3,"ngClass"],["heading","Categories",3,"categories","viewSubCategory",4,"ngIf"],[4,"ngFor","ngForOf"],["heading","Categories",3,"categories","viewSubCategory"],[3,"categories","loading","parentId","heading","close","viewSubCategory"]],template:function(e,r){1&e&&(t._UZ(0,"div",0),t.YNc(1,nt,1,1,"app-category-table",1),t.YNc(2,it,2,4,"ng-container",2)),2&e&&(t.Q6J("ngClass",t.VKq(3,st,!r.categories)),t.xp6(1),t.Q6J("ngIf",r.categories),t.xp6(1),t.Q6J("ngForOf",r.subCategories))},dependencies:[a.mk,a.sg,a.O5,rt]}),o})();var _=u(1129),Z=u(5698);let k=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.N.apiUrl,this.authors=new Map}getAllAuthors(e){let r=Object.values(e).join("-");const n=this.authors.get(r);return n?(0,m.of)(n):this.http.get(`${this.baseUrl}/authors`,{params:{...e}}).pipe((0,p.U)(s=>(this.authors.set(r,s),s)))}getAuthor(e){return this.http.get(`${this.baseUrl}/authors/${e}`)}updateAuthor(e,r){return this.http.put(`${this.baseUrl}/authors/${e}`,r)}createAuthor(e){return this.http.post(`${this.baseUrl}/authors`,e)}deleteAuthor(e){return this.http.delete(`${this.baseUrl}/authors/${e}`).pipe((0,p.U)(()=>{this.authors.forEach((r,n)=>{r.items=r.items.filter(s=>s.id!=e)})}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=u(7053);function at(o,i){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.xi3(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB")}}function ct(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"strong"),t._uU(3),t.qZA()(),t.YNc(4,at,3,4,"td",23),t.qZA()),2&o){const e=i.$implicit,r=t.oxw(2);t.xp6(3),t.Oqu(null==e||null==e.file?null:e.file.name),t.xp6(1),t.Q6J("ngIf",null==r.uploader||null==r.uploader.options?null:r.uploader.options.isHTML5)}}const ut=function(o){return{width:o}};function pt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",11)(1,"h3"),t._uU(2,"Upload queue"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"table",12)(6,"thead")(7,"tr")(8,"th",13),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Size"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,ct,5,2,"tr",14),t.qZA()(),t.TgZ(14,"div")(15,"div"),t._uU(16," Queue progress: "),t.TgZ(17,"div",15),t._UZ(18,"div",16),t.qZA()(),t.TgZ(19,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(null==n.uploader?null:n.uploader.uploadAll())}),t._UZ(20,"span",18),t._uU(21," Upload all "),t.qZA(),t.TgZ(22,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(null==n.uploader?null:n.uploader.cancelAll())}),t._UZ(23,"span",20),t._uU(24," Cancel all "),t.qZA(),t.TgZ(25,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(null==n.uploader?null:n.uploader.clearQueue())}),t._UZ(26,"span",22),t._uU(27," Remove all "),t.qZA()()()}if(2&o){const e=t.oxw();let r;t.xp6(4),t.hij("Queue length: ",null==e.uploader||null==e.uploader.queue?null:e.uploader.queue.length,""),t.xp6(9),t.Q6J("ngForOf",null==e.uploader?null:e.uploader.queue),t.xp6(5),t.Q6J("ngStyle",t.VKq(6,ut,(null==e.uploader?null:e.uploader.progress)+"%")),t.xp6(1),t.Q6J("disabled",!(null!=e.uploader&&null!=(r=e.uploader.getNotUploadedItems())&&r.length)),t.xp6(3),t.Q6J("disabled",!(null!=e.uploader&&e.uploader.isUploading)),t.xp6(3),t.Q6J("disabled",!(null!=e.uploader&&null!=e.uploader.queue&&e.uploader.queue.length))}}const ht=function(o){return{loader:o}},dt=function(o){return{"nv-file-over":o}};let J=(()=>{class o{constructor(e,r,n,s){this.formBuilder=e,this.authorService=r,this.authenticationService=n,this.toastr=s,this.authorForm=new l.cw({}),this.hasBaseDropZoneOver=!1,this.baseUrl=g.N.apiUrl,this.loading=!1,this.authenticationService.currentUser$.pipe((0,Z.q)(1)).subscribe({next:c=>{c&&(this.user=c)}})}ngOnInit(){this.initializeForm(),this.initializeUploader()}initializeForm(){this.authorForm=this.formBuilder.group({name:[this.author?`${this.author.name}`:"",l.kI.required],bio:[this.author?`${this.author.bio}`:"",l.kI.required]})}fileOverBase(e){this.hasBaseDropZoneOver=e}initializeUploader(){this.uploader=new _.bA({url:`${this.baseUrl}/authors/${this.author?.id}/add-picture`,authToken:"Bearer "+this.user?.token,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!1,maxFileSize:31457280,queueLimit:1}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.onSuccessItem=(e,r,n,s)=>{r&&JSON.parse(r)}}onSubmit(){if(this.authorForm.valid){this.loading=!0;const e={...this.authorForm.value};this.author?this.authorService.updateAuthor(this.author.id,e).subscribe({next:r=>{this.author=r,this.uploader?.setOptions({url:`${this.baseUrl}/authors/${this.author?.id}/add-picture`}),this.uploader?.uploadAll(),this.toastr.success("Author Updated"),this.loading=!1}}):this.authorService.createAuthor(e).subscribe({next:r=>{this.author=r,this.uploader?.setOptions({url:`${this.baseUrl}/authors/${this.author?.id}/add-picture`}),this.uploader?.uploadAll(),this.authorForm.setValue({name:"",bio:""}),this.authorForm.reset(),this.toastr.success("Author Added"),this.loading=!1}})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(k),t.Y36(A.$),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-author-form"]],inputs:{author:"author"},decls:18,vars:11,consts:[[3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center"],[1,"text-center"],[1,"inp"],["inputType","text","label","Author's Full Name",3,"formControl"],["inputType","textarea","label","Author's Bio",3,"formControl"],["ng2FileDrop","",1,"card","bg-faded","p-5","text-center","mb-3","my-drop-zone",2,"min-height","12rem",3,"ngClass","uploader","fileOver"],[1,"fa","fa-upload","fa-3x"],["ng2FileSelect","","type","file",3,"uploader"],["class","col-9","style","margin-bottom: 40px",4,"ngIf"],["type","submit",1,"btn","btn-dark","btn-block","my-4","mb-5",3,"click"],[1,"col-9",2,"margin-bottom","40px"],[1,"table"],["width","50%"],[4,"ngFor","ngForOf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"],["type","button",1,"btn","btn-success","btn-s",3,"disabled","click"],[1,"fa","fa-upload"],["type","button",1,"btn","btn-warning","btn-s",3,"disabled","click"],[1,"fa","fa-ban"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],[1,"fa","fa-trash"],["nowrap","",4,"ngIf"],["nowrap",""]],template:function(e,r){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-input",4),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"app-input",5),t.qZA(),t.TgZ(7,"div")(8,"div")(9,"h3"),t._uU(10,"Add Author Picture"),t.qZA(),t.TgZ(11,"div",6),t.NdJ("fileOver",function(s){return r.fileOverBase(s)}),t._UZ(12,"i",7),t._uU(13," Drop Picture here "),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.YNc(15,pt,28,8,"div",9),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){return r.onSubmit()}),t._uU(17," Submit "),t.qZA()()()),2&e&&(t.Q6J("ngClass",t.VKq(7,ht,r.loading)),t.xp6(4),t.Q6J("formControl",r.authorForm.controls.name),t.xp6(2),t.Q6J("formControl",r.authorForm.controls.bio),t.xp6(5),t.Q6J("ngClass",t.VKq(9,dt,r.hasBaseDropZoneOver))("uploader",r.uploader),t.xp6(3),t.Q6J("uploader",r.uploader),t.xp6(1),t.Q6J("ngIf",null==r.uploader||null==r.uploader.queue?null:r.uploader.queue.length))},dependencies:[a.mk,a.sg,a.O5,a.PC,_.GN,_.C6,l.JJ,l.oH,x,a.JJ],styles:[".inp[_ngcontent-%COMP%]{margin-bottom:2.1rem;max-width:40rem;min-width:40rem}"]}),o})(),gt=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-author"]],decls:3,vars:0,consts:[[1,"text-center","mb-5"]],template:function(e,r){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Create New Author"),t.qZA(),t._UZ(2,"app-author-form"))},dependencies:[J]}),o})();var U=u(8739);const mt=function(o){return{loader:o}};function _t(o,i){if(1&o&&(t.TgZ(0,"tr",3)(1,"td",8),t._UZ(2,"div",10),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(1,mt,e.loading))}}function bt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",11),t._UZ(5,"img",12),t.TgZ(6,"div",13)(7,"p",14),t._uU(8),t.qZA()()()(),t.TgZ(9,"td",5)(10,"button",15),t._uU(11," Edit "),t.qZA(),t.TgZ(12,"button",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteAuthor(s))}),t._uU(13," Delete "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.s9C("src",e.pictureUrl||"./assets/user.png",t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.MGl("routerLink","../author-edit/",e.id,"")}}const ft=function(o){return[o,5,10,25,100]};function Ct(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-paginator",17),t.NdJ("page",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChange(n))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("length",e.authors.count)("pageSizeOptions",t.VKq(3,ft,e.authors.pageSize))("pageSize",e.authors.pageSize)}}let xt=(()=>{class o{constructor(e,r){this.authorService=e,this.toastr=r,this.paginationParams=new C,this.loading=!1}ngOnInit(){this.paginationParams.pageSize=5,this.loadAuthors()}loadAuthors(){this.loading=!0,this.authorService.getAllAuthors(this.paginationParams).subscribe({next:e=>{this.authors=e,this.loading=!1}})}deleteAuthor(e){this.loading=!0,this.authorService.deleteAuthor(e.id).subscribe({next:()=>{this.toastr.success(`${e.name} deleted from Authors`,"Author Deleted"),this.authors&&(this.authors.items=this.authors.items.filter(r=>r.id!=e.id)),this.loading=!1}})}onPageChange(e){this.paginationParams.pageNumber=e.pageIndex+1,this.paginationParams.pageSize=e.pageSize,this.loadAuthors()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-author-list"]],decls:17,vars:3,consts:[[1,"display-5","text-center"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[1,"text-center"],[1,"px-5"],[1,""],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],[4,"ngIf"],[3,"ngClass"],[1,"px-4","d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","65px","height","65px",3,"src"],[1,"ms-3"],[1,"mb-1"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded",3,"routerLink"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded","text-danger",3,"click"],["aria-label","Select page","showFirstLastButtons","",1,"mat-paginator",3,"length","pageSizeOptions","pageSize","page"]],template:function(e,r){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Authors"),t.qZA(),t.TgZ(2,"table",1)(3,"thead",2)(4,"tr")(5,"th",3),t._uU(6,"Id"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"Author Name"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Actions"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,_t,3,3,"tr",6),t.YNc(13,bt,14,4,"tr",7),t.TgZ(14,"tr")(15,"td",8),t.YNc(16,Ct,2,5,"ng-container",9),t.qZA()()()()),2&e&&(t.xp6(12),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngForOf",null==r.authors?null:r.authors.items),t.xp6(3),t.Q6J("ngIf",r.authors))},dependencies:[a.mk,a.sg,a.O5,h.rH,U.NW],styles:[".mat-paginator[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),o})();const Zt=function(o){return{loader:o}};function kt(o,i){if(1&o&&(t.TgZ(0,"div")(1,"h1",1),t._uU(2),t.qZA(),t._UZ(3,"div",2)(4,"app-author-form",3),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.author.name),t.xp6(1),t.Q6J("ngClass",t.VKq(3,Zt,e.loading)),t.xp6(1),t.Q6J("author",e.author)}}let Tt=(()=>{class o{constructor(e,r,n){this.route=e,this.authorService=r,this.router=n,this.loading=!1}ngOnInit(){this.authorService.getAuthor(Number(this.route.snapshot.paramMap.get("id"))).subscribe({next:e=>{this.author=e},error:()=>{this.router.navigateByUrl("/admin")}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.gz),t.Y36(k),t.Y36(h.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-author-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center","mb-5"],[3,"ngClass"],[3,"author"]],template:function(e,r){1&e&&t.YNc(0,kt,5,5,"div",0),2&e&&t.Q6J("ngIf",r.author)},dependencies:[a.mk,a.O5,J]}),o})();class yt{constructor(){this.name="",this.description="",this.authorsId=[],this.publisherId=0,this.categoriesId=[],this.paperbackPrice=0,this.paperbackQuantity=0,this.hardcoverPrice=0,this.hardcoverQuantity=0,this.printLength=0,this.language="",this.isbn13="",this.publicationDate=new Date}}let S=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.N.apiUrl,this.books=new Map}getAllBooks(e){let r=Object.values(e).join("-");const n=this.books.get(r);return n?(0,m.of)(n):this.http.get(`${this.baseUrl}/books`,{params:{...e}}).pipe((0,p.U)(s=>(this.books.set(r,s),s)))}getBookById(e){return this.http.get(`${this.baseUrl}/books/${e}`)}createBook(e){return this.http.post(`${this.baseUrl}/books`,e)}deleteBook(e){return this.http.delete(`${this.baseUrl}/books/${e}`).pipe((0,p.U)(()=>{this.books.forEach((r,n)=>{r.items=r.items.filter(s=>s.id!=e)})}))}setMainPicture(e,r){return this.http.post(`${this.baseUrl}/books/${e}/set-main-picture/${r}`,{})}deletePicture(e,r){return this.http.delete(`${this.baseUrl}/books/${e}/delete-picture/${r}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=u(9549),q=u(9602),vt=u(284),N=u(7579),At=u(6063);class Ut extends N.x{constructor(i=1/0,e=1/0,r=At.l){super(),this._bufferSize=i,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,e)}next(i){const{isStopped:e,_buffer:r,_infiniteTimeWindow:n,_timestampProvider:s,_windowTime:c}=this;e||(r.push(i),!n&&r.push(s.now()+c)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(i),{_infiniteTimeWindow:r,_buffer:n}=this,s=n.slice();for(let c=0;c<s.length&&!i.closed;c+=r?1:2)i.next(s[c]);return this._checkFinalizedStatuses(i),e}_trimBuffer(){const{_bufferSize:i,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:n}=this,s=(n?1:2)*i;if(i<1/0&&s<r.length&&r.splice(0,r.length-s),!n){const c=e.now();let w=0;for(let T=1;T<r.length&&r[T]<=c;T+=2)w=T;w&&r.splice(0,w+1)}}}var B=u(2722),St=u(5113),qt=u(3238),wt=u(9197);const It=["singleSelect"];function Ft(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClose())}),t.qZA()}}function Jt(o,i){if(1&o&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.id," - ",e.name," ")}}function Nt(o,i){if(1&o&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Please Select ",e.label,"\n")}}let Bt=(()=>{class o{constructor(e,r){this.http=e,this.authenticationService=r,this.select=new t.vpe,this.close=new t.vpe,this.control=new l.NI,this.filterControl=new l.NI,this.filteredItems=new Ut(1),this.touched=!1,this.baseUrl=g.N.apiUrl,this.selectedId=0,this.selectedData={},this.searchUrl=`${this.baseUrl}/authors`,this.label="",this.loading=!1,this.items=[],this._onDestroy=new N.x}ngOnInit(){this.control.setValue(""),this.filteredItems.next(this.items.slice()),this.filterControl.valueChanges.pipe((0,B.R)(this._onDestroy)).subscribe(()=>{this.filterBanks()}),this.authenticationService.currentUser$.pipe((0,Z.q)(1)).subscribe({next:e=>{e&&(this.user=e)}})}ngAfterViewInit(){this.setInitialValue()}ngOnDestroy(){this._onDestroy.next(!0),this._onDestroy.complete()}onSubmit(){}onSelect(){const e={prevId:this.selectedId,id:this.control.value.id};this.selectedId=this.control.value.id,this.selectedData=e,this.select.emit(e)}onSelectTouched(){this.touched=!0}onClose(){this.close.emit(this.selectedId)}setInitialValue(){this.filteredItems.pipe((0,Z.q)(1),(0,B.R)(this._onDestroy)).subscribe(()=>{this.singleSelect&&(this.singleSelect.compareWith=(e,r)=>e&&r&&e.id===r.id)})}filterBanks(){if(!this.items)return;let e=this.filterControl.value;if(!e)return void this.filteredItems.next(this.items.slice());e=e.toLowerCase();let r=[];this.http.get(`${this.searchUrl}?searchTerm=${e}`).subscribe({next:n=>{r=[...n.items],this.filteredItems.next(r.slice()),this.items=r.slice(),r.length||this.control.setValue({})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.eN),t.Y36(A.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-search"]],viewQuery:function(e,r){if(1&e&&t.Gf(It,7),2&e){let n;t.iGM(n=t.CRH())&&(r.singleSelect=n.first)}},inputs:{searchUrl:"searchUrl",label:"label"},outputs:{select:"select",close:"close"},decls:13,vars:9,consts:[[1,"hr"],["class","fas fa-window-close text-danger",3,"click",4,"ngIf"],[2,"width","40rem",3,"click"],[3,"formControl","placeholder","selectionChange"],["singleSelect",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"fas","fa-window-close","text-danger",3,"click"],[3,"value"],[1,"text-danger"]],template:function(e,r){1&e&&(t._UZ(0,"hr",0),t.TgZ(1,"h5"),t._uU(2),t.YNc(3,Ft,1,0,"i",1),t.qZA(),t.TgZ(4,"mat-form-field",2),t.NdJ("click",function(){return r.onSelectTouched()}),t.TgZ(5,"mat-select",3,4),t.NdJ("selectionChange",function(){return r.onSelect()}),t.TgZ(7,"mat-option"),t._UZ(8,"ngx-mat-select-search",5),t.qZA(),t.YNc(9,Jt,2,3,"mat-option",6),t.ALo(10,"async"),t.qZA()(),t.YNc(11,Nt,2,1,"p",7),t._UZ(12,"hr",0)),2&e&&(t.xp6(2),t.hij(" Select ",r.label," "),t.xp6(1),t.Q6J("ngIf",r.label.includes("Co-")||r.label.includes("Sub-")),t.xp6(2),t.Q6J("formControl",r.control)("placeholder",r.label),t.xp6(3),t.Q6J("formControl",r.filterControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(10,7,r.filteredItems)),t.xp6(2),t.Q6J("ngIf",r.touched&&!r.control.value))},dependencies:[a.sg,a.O5,f.KE,St.gD,qt.ey,wt.nu,l.JJ,l.oH,a.Ov],styles:["i[_ngcontent-%COMP%]{cursor:pointer}i[_ngcontent-%COMP%]:hover{opacity:.9}"]}),o})();function Mt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"app-select-search",30),t.NdJ("close",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.closeCoAuthor(n))})("select",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onAuthorSelect(n))}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("searchUrl",e.baseUrl+"/authors")}}function Qt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"app-select-search",31),t.NdJ("select",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onCategorySelect(n))}),t.qZA()()}if(2&o){const e=i.$implicit;t.xp6(1),t.Q6J("searchUrl",e)}}function Pt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t._UZ(1,"img",35),t.TgZ(2,"div",2)(3,"button",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.setMainPicture(c.book.id,s.id))}),t._uU(4," Main "),t.qZA(),t.TgZ(5,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.deletePicture(c.book.id,s.id))}),t._UZ(6,"i",38),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(1),t.s9C("src",e.url,t.LSH),t.xp6(2),t.Q6J("disabled",e.isMain)("ngClass",e.isMain?"btn-success active":"btn-outline-success"),t.xp6(2),t.Q6J("disabled",e.isMain)}}function Ot(o,i){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,Pt,7,4,"div",33),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.book.pictures)}}function $t(o,i){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.xi3(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB")}}function Lt(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"strong"),t._uU(3),t.qZA()(),t.YNc(4,$t,3,4,"td",46),t.qZA()),2&o){const e=i.$implicit,r=t.oxw(2);t.xp6(3),t.Oqu(null==e||null==e.file?null:e.file.name),t.xp6(1),t.Q6J("ngIf",null==r.uploader||null==r.uploader.options?null:r.uploader.options.isHTML5)}}const Yt=function(o){return{width:o}};function zt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"h3"),t._uU(2,"Upload queue"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"table",40)(6,"thead")(7,"tr")(8,"th",41),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Size"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,Lt,5,2,"tr",42),t.qZA()(),t.TgZ(14,"div")(15,"div"),t._uU(16," Queue progress: "),t.TgZ(17,"div",43),t._UZ(18,"div",44),t.qZA()(),t.TgZ(19,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(null==n.uploader?null:n.uploader.clearQueue())}),t._UZ(20,"span",38),t._uU(21," Remove all "),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.hij("Queue length: ",null==e.uploader||null==e.uploader.queue?null:e.uploader.queue.length,""),t.xp6(9),t.Q6J("ngForOf",null==e.uploader?null:e.uploader.queue),t.xp6(5),t.Q6J("ngStyle",t.VKq(4,Yt,(null==e.uploader?null:e.uploader.progress)+"%")),t.xp6(1),t.Q6J("disabled",!(null!=e.uploader&&null!=e.uploader.queue&&e.uploader.queue.length))}}const Et=function(o){return{loader:o}},Ht=function(){return[]},Kt=function(o){return{"nv-file-over":o}};let M=(()=>{class o{constructor(e,r,n,s,c){this.authenticationService=e,this.formBuilder=r,this.categoryService=n,this.bookService=s,this.toastr=c,this.bookForm=new l.cw({}),this.baseUrl=g.N.apiUrl,this.createBookModel=new yt,this.coAuthorCount=0,this.parentCategories=[],this.date="",this.loading=!1,this.hasBaseDropZoneOver=!1}ngOnInit(){this.authenticationService.currentUser$.pipe((0,Z.q)(1)).subscribe({next:e=>{e&&(this.user=e)},error:e=>{this.toastr.error(e.error.errorMessage)}}),this.initializeUploader(),this.initializeForm()}initializeForm(){this.bookForm=this.formBuilder.group({name:[this.book?`${this.book.name}`:"",[l.kI.required,l.kI.minLength(10)]],description:[this.book?`${this.book.description}`:"",[l.kI.required,l.kI.minLength(20)]],paperbackPrice:[this.book?`${this.book.paperbackPrice}`:"",[l.kI.required,l.kI.min(10)]],paperbackQuantity:[this.book?`${this.book.paperbackQuantity}`:"",[l.kI.required,l.kI.min(1)]],hardcoverPrice:[this.book?`${this.book.hardcoverPrice}`:"",[l.kI.required,l.kI.min(10)]],hardcoverQuantity:[this.book?`${this.book.hardcoverQuantity}`:"",[l.kI.required,l.kI.min(1)]],printLength:[this.book?`${this.book.printLength}`:"",[l.kI.required,l.kI.min(1)]],publicationDate:[this.book?`${this.book.publicationDate}`:"",[l.kI.required]],language:[this.book?`${this.book.language}`:"",[l.kI.required,l.kI.minLength(3)]],isbn13:[this.book?`${this.book.isbn13}`:"",[l.kI.required,l.kI.minLength(5)]]})}fileOverBase(e){this.hasBaseDropZoneOver=e}initializeUploader(){this.uploader=new _.bA({url:`${this.baseUrl}/books/${this.book?.id}/add-picture`,authToken:"Bearer "+this.user?.token,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!1,maxFileSize:31457280,queueLimit:4}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.onSuccessItem=(e,r,n,s)=>{r&&(JSON.parse(r),this.toastr.success("Picture added."))}}onSubmit(){!this.bookForm.valid||!this.createBookModel.publisherId||!this.createBookModel.authorsId.length||!this.createBookModel.categoriesId.length||(this.createBookModel={...this.createBookModel,...this.bookForm.value},this.bookService.createBook(this.createBookModel).subscribe({next:e=>{this.uploader?.setOptions({url:`${this.baseUrl}/books/${e.id}/add-picture`}),this.toastr.success(`${e.name} added.`),this.bookForm.reset(),this.uploader?.uploadAll()},error:e=>{this.toastr.error(e.error.errorMessage)}}))}onAuthorSelect(e){e.prevId&&(this.createBookModel.authorsId=this.createBookModel.authorsId.filter(r=>r!=e.prevId)),this.createBookModel.authorsId.push(e.id)}onCategorySelect(e){e.prevId&&(this.createBookModel.categoriesId=this.createBookModel.categoriesId.filter(r=>r!=e.prevId)),this.createBookModel.categoriesId.push(e.id),this.categoryService.getSubCategories(e.id).subscribe({next:r=>{r&&r.subCategories.length&&this.parentCategories.push(`${this.baseUrl}/categories/${e.id}/sub-categories`)},error:r=>{this.toastr.error(r.error.errorMessage)}})}onPublisherSelect(e){this.createBookModel.publisherId=e.id}onDateChange(e){this.bookForm.setValue({...this.bookForm.value,publicationDate:new Date(e.value)})}addCoAuthor(){this.coAuthorCount++}closeCoAuthor(e){this.coAuthorCount--,this.createBookModel.authorsId=this.createBookModel.authorsId.filter(r=>r!=e)}setMainPicture(e,r){this.bookService.setMainPicture(e,r).subscribe({next:()=>{this.book&&(this.book.pictures=this.book.pictures.map(n=>(n.isMain&&(n.isMain=!1),n.id==r&&(n.isMain=!0),n))),this.toastr.success("Main Picture Updated")}})}deletePicture(e,r){this.bookService.deletePicture(e,r).subscribe({next:()=>{this.book&&(this.book.pictures=this.book.pictures.filter(n=>n.id!=r)),this.toastr.success("Picture deleted")},error:n=>{this.toastr.error(n.error.errorMessage)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.$),t.Y36(l.qu),t.Y36(y),t.Y36(S),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-book-form"]],inputs:{book:"book"},decls:59,vars:29,consts:[[3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center"],[1,"text-center"],[1,"input"],["inputType","text","label","Book Name",3,"formControl"],["inputType","textarea","label","Book Description",3,"formControl"],["label","Author",3,"searchUrl","select"],["class","input",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-dark","btn-block","mb-5",3,"disabled","click"],["label","Category",3,"searchUrl","select"],["label","Publisher",3,"searchUrl","select"],["inputType","number","label","Paperback Price",3,"formControl"],["inputType","number","label","Paperback Quantity",3,"formControl"],[1,"hr"],["inputType","number","label","Hardcover Price",3,"formControl"],["inputType","number","label","Hardcover Quantity",3,"formControl"],["inputType","number","label","Print Length",3,"formControl"],["inputType","text","label","Language",3,"formControl"],["inputType","text","label","ISBN-13",3,"formControl"],[2,"min-width","40rem"],["matInput","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],["class","input row",4,"ngIf"],[1,"mb-3"],["ng2FileDrop","",1,"card","bg-faded","p-5","text-center","mb-3","my-drop-zone",2,"min-height","12rem",3,"ngClass","uploader","fileOver"],[1,"fa","fa-upload","fa-3x"],["ng2FileSelect","","type","file",3,"uploader"],["class","col-9","style","margin-bottom: 40px",4,"ngIf"],["type","submit",1,"btn","btn-dark","btn-block","my-5","mb-5",3,"disabled","click"],["label","Co-Author",3,"searchUrl","close","select"],["label","Sub-Category",3,"searchUrl","select"],[1,"input","row"],["class","col-2 mb-1",4,"ngFor","ngForOf"],[1,"col-2","mb-1"],["alt","photo of user",1,"img-thumbnail","mb-1",3,"src"],[1,"btn","btn-sm",3,"disabled","ngClass","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"],[1,"col-9",2,"margin-bottom","40px"],[1,"table"],["width","50%"],[4,"ngFor","ngForOf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],["nowrap","",4,"ngIf"],["nowrap",""]],template:function(e,r){if(1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-input",4),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"app-input",5),t.qZA(),t.TgZ(7,"div",3)(8,"app-select-search",6),t.NdJ("select",function(s){return r.onAuthorSelect(s)}),t.qZA()(),t.YNc(9,Mt,2,1,"div",7),t.TgZ(10,"button",8),t.NdJ("click",function(){return r.addCoAuthor()}),t._uU(11," Add More Author "),t.qZA(),t.TgZ(12,"div",3)(13,"app-select-search",9),t.NdJ("select",function(s){return r.onCategorySelect(s)}),t.qZA()(),t.YNc(14,Qt,2,1,"div",7),t.TgZ(15,"div",3)(16,"app-select-search",10),t.NdJ("select",function(s){return r.onPublisherSelect(s)}),t.qZA()(),t.TgZ(17,"div",3),t._UZ(18,"app-input",11),t.qZA(),t.TgZ(19,"div",3),t._UZ(20,"app-input",12),t.qZA(),t._UZ(21,"hr",13),t.TgZ(22,"div",3),t._UZ(23,"app-input",14),t.qZA(),t.TgZ(24,"div",3),t._UZ(25,"app-input",15),t.qZA(),t._UZ(26,"hr",13),t.TgZ(27,"div",3),t._UZ(28,"app-input",16),t.qZA(),t.TgZ(29,"div",3),t._UZ(30,"app-input",17),t.qZA(),t.TgZ(31,"div",3),t._UZ(32,"app-input",18),t.qZA(),t._UZ(33,"hr",13),t.TgZ(34,"div",3)(35,"h5"),t._uU(36,"Select Publication Date"),t.qZA(),t.TgZ(37,"mat-form-field",19)(38,"mat-label"),t._uU(39,"Choose a date"),t.qZA(),t.TgZ(40,"input",20),t.NdJ("dateChange",function(s){return r.onDateChange(s)}),t.qZA(),t.TgZ(41,"mat-hint"),t._uU(42,"MM/DD/YYYY"),t.qZA(),t._UZ(43,"mat-datepicker-toggle",21)(44,"mat-datepicker",null,22),t.qZA()(),t._UZ(46,"hr",13),t.YNc(47,Ot,2,1,"div",23),t.TgZ(48,"div",24)(49,"div")(50,"h3"),t._uU(51,"Add Book Pictures"),t.qZA(),t.TgZ(52,"div",25),t.NdJ("fileOver",function(s){return r.fileOverBase(s)}),t._UZ(53,"i",26),t._uU(54," Drop Picture here "),t.qZA(),t._UZ(55,"input",27),t.qZA(),t.YNc(56,zt,22,6,"div",28),t.qZA(),t.TgZ(57,"button",29),t.NdJ("click",function(){return r.onSubmit()}),t._uU(58," Submit "),t.qZA()()()),2&e){const n=t.MAs(45);t.Q6J("ngClass",t.VKq(24,Et,r.loading)),t.xp6(4),t.Q6J("formControl",r.bookForm.controls.name),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.description),t.xp6(2),t.Q6J("searchUrl",r.baseUrl+"/authors"),t.xp6(1),t.Q6J("ngForOf",t.DdM(26,Ht).constructor(r.coAuthorCount)),t.xp6(1),t.Q6J("disabled",!r.createBookModel.authorsId.length),t.xp6(3),t.Q6J("searchUrl",r.baseUrl+"/categories"),t.xp6(1),t.Q6J("ngForOf",r.parentCategories),t.xp6(2),t.Q6J("searchUrl",r.baseUrl+"/publishers"),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.paperbackPrice),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.paperbackQuantity),t.xp6(3),t.Q6J("formControl",r.bookForm.controls.hardcoverPrice),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.hardcoverQuantity),t.xp6(3),t.Q6J("formControl",r.bookForm.controls.printLength),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.language),t.xp6(2),t.Q6J("formControl",r.bookForm.controls.isbn13),t.xp6(8),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(4),t.Q6J("ngIf",r.book),t.xp6(5),t.Q6J("ngClass",t.VKq(27,Kt,r.hasBaseDropZoneOver))("uploader",r.uploader),t.xp6(3),t.Q6J("uploader",r.uploader),t.xp6(1),t.Q6J("ngIf",null==r.uploader||null==r.uploader.queue?null:r.uploader.queue.length),t.xp6(1),t.Q6J("disabled",!r.bookForm.valid)}},dependencies:[a.mk,a.sg,a.O5,a.PC,f.KE,f.hX,f.bx,f.R9,q.Mq,q.hl,q.nW,vt.Nt,_.GN,_.C6,l.JJ,l.oH,x,Bt,a.JJ],styles:[".ngx-gallery[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px}"]}),o})(),Dt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-book-create"]],decls:3,vars:0,consts:[[1,"text-center","mb-5"]],template:function(e,r){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Create New Book"),t.qZA(),t._UZ(2,"app-book-form"))},dependencies:[M]}),o})(),Q=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.N.apiUrl,this.publishers=new Map}getAllPublishers(e){let r=Object.values(e).join("-");const n=this.publishers.get(r);return n?(0,m.of)(n):this.http.get(`${this.baseUrl}/publishers`,{params:{...e}}).pipe((0,p.U)(s=>(this.publishers.set(r,s),s)))}createPublisher(e){return this.http.post(`${this.baseUrl}/publishers`,e)}deletePublisher(e){return this.http.delete(`${this.baseUrl}/publishers/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Gt=(()=>{class o{constructor(e,r,n){this.formBuilder=e,this.publisherService=r,this.toastr=n,this.publisherForm=new l.cw({})}ngOnInit(){this.initializeForm()}initializeForm(){this.publisherForm=this.formBuilder.group({name:["",l.kI.required]})}onSubmit(){if(!this.publisherForm.valid)return;const e={...this.publisherForm.value};this.publisher||this.publisherService.createPublisher(e).subscribe({next:r=>{r&&this.toastr.success(`Publisher ${r.name} Added to List`),this.publisherForm.setValue({name:""}),this.publisherForm.reset()}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(Q),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-publisher-form"]],inputs:{publisher:"publisher"},decls:6,vars:1,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"text-center"],[1,"input"],["inputType","text","label","Publisher's Name",3,"formControl"],["type","submit",1,"btn","btn-dark","btn-block","my-4","mb-5",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-input",3),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){return r.onSubmit()}),t._uU(5," Submit "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("formControl",r.publisherForm.controls.name))},dependencies:[l.JJ,l.oH,x]}),o})(),Vt=(()=>{class o{ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-publisher"]],decls:3,vars:0,consts:[[1,"text-center","mb-5"]],template:function(e,r){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Create New Publisher"),t.qZA(),t._UZ(2,"app-publisher-form"))},dependencies:[Gt]}),o})();class jt{constructor(){this.count=0,this.currentPage=0,this.totalPages=0,this.pageSize=0,this.items=[]}}const Wt=function(o){return{loader:o}};function Xt(o,i){if(1&o&&(t.TgZ(0,"tr",3)(1,"td",8),t._UZ(2,"div",10),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(1,Wt,e.loading))}}function Rt(o,i){1&o&&(t.TgZ(0,"tr",3)(1,"td",8)(2,"p",11),t._uU(3,"No Publishers Added Yet..."),t.qZA()()())}function te(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"p",12),t._uU(5),t.qZA()(),t.TgZ(6,"td",5)(7,"button",13),t._uU(8," Edit "),t.qZA(),t.TgZ(9,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deletePublisher(s))}),t._uU(10," Delete "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.Oqu(e.name)}}const ee=function(o){return[o,5,10,25,100]};function oe(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-paginator",15),t.NdJ("page",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChange(n))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("length",e.publishersList.count)("pageSizeOptions",t.VKq(3,ee,e.publishersList.count))("pageSize",e.publishersList.pageSize)}}let re=(()=>{class o{constructor(e,r){this.publisherService=e,this.toastr=r,this.paginationParams=new C,this.loading=!1}ngOnInit(){this.publishersList=new jt,this.paginationParams.pageSize=5,this.loadPublishers()}loadPublishers(){this.loading=!0,this.publisherService.getAllPublishers(this.paginationParams).subscribe({next:e=>{this.publishersList=e,this.loading=!1}})}deletePublisher(e){this.publisherService.deletePublisher(e.id).subscribe({next:()=>{this.publishersList&&(this.publishersList.items=this.publishersList.items.filter(r=>r.id!=e.id),this.publishersList.count=this.publishersList.items.length),this.toastr.success(`Publisher ${e.name} deleted...`)}})}onPageChange(e){this.paginationParams.pageNumber=e.pageIndex+1,this.paginationParams.pageSize=e.pageSize,this.loadPublishers()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-publisher-list"]],decls:18,vars:4,consts:[[1,"display-5","text-center"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[1,"text-center"],[1,"px-5"],[1,""],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],[4,"ngIf"],[3,"ngClass"],[1,"lead"],[1,"fw-normal","mb-1"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded","text-danger",3,"click"],["aria-label","Select page","showFirstLastButtons","",1,"mat-paginator",3,"length","pageSizeOptions","pageSize","page"]],template:function(e,r){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Publishers"),t.qZA(),t.TgZ(2,"table",1)(3,"thead",2)(4,"tr")(5,"th",3),t._uU(6,"Id"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"Publisher Name"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Actions"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,Xt,3,3,"tr",6),t.YNc(13,Rt,4,0,"tr",6),t.YNc(14,te,11,2,"tr",7),t.TgZ(15,"tr")(16,"td",8),t.YNc(17,oe,2,5,"ng-container",9),t.qZA()()()()),2&e&&(t.xp6(12),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngIf",r.publishersList&&!r.publishersList.count),t.xp6(1),t.Q6J("ngForOf",null==r.publishersList?null:r.publishersList.items),t.xp6(3),t.Q6J("ngIf",r.publishersList))},dependencies:[a.mk,a.sg,a.O5,U.NW]}),o})();const ne=function(o){return{loader:o}};function ie(o,i){if(1&o&&(t.TgZ(0,"tr",3)(1,"td",8),t._UZ(2,"div",10),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(1,ne,e.loading))}}function se(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",11),t._UZ(5,"img",12),t.TgZ(6,"div",13)(7,"p",14),t._uU(8),t.qZA()()()(),t.TgZ(9,"td",5)(10,"button",15),t._uU(11," Edit "),t.qZA(),t.TgZ(12,"button",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteBook(s))}),t._uU(13," Delete "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.s9C("src",e.pictures.length&&e.pictures[0].url||"./assets/user.png",t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.MGl("routerLink","../book-edit/",e.id,"")}}const le=function(o){return[o,5,10,25,100]};function ae(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-paginator",17),t.NdJ("page",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChange(n))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("length",e.books.count)("pageSizeOptions",t.VKq(3,le,e.books.pageSize))("pageSize",e.books.pageSize)}}function ue(o,i){if(1&o&&t._UZ(0,"app-book-form",3),2&o){const e=t.oxw();t.Q6J("book",e.book)}}const pe=function(o){return{loader:o}},he=[{path:"categories",component:lt},{path:"create-book",component:Dt},{path:"book-list",component:(()=>{class o{constructor(e,r,n){this.authorService=e,this.booksService=r,this.toastr=n,this.paginationParams=new C,this.loading=!1}ngOnInit(){this.paginationParams.pageSize=5,this.loadAuthors()}loadAuthors(){this.loading=!0,this.booksService.getAllBooks(this.paginationParams).subscribe({next:e=>{this.books=e,this.loading=!1},error:e=>{this.toastr.error(e.error.errorMessage),this.loading=!1}})}deleteBook(e){this.loading=!0,this.booksService.deleteBook(e.id).subscribe({next:()=>{this.toastr.success(`${e.name} deleted from Books`),this.books&&(this.books.items=this.books.items.filter(r=>r.id!=e.id)),this.loading=!1},error:r=>{this.toastr.error(r.error.errorMessage),this.loading=!1}})}onPageChange(e){this.paginationParams.pageNumber=e.pageIndex+1,this.paginationParams.pageSize=e.pageSize,this.loadAuthors()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(S),t.Y36(d._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-book-list"]],decls:17,vars:3,consts:[[1,"display-5","text-center"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[1,"text-center"],[1,"px-5"],[1,""],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],[4,"ngIf"],[3,"ngClass"],[1,"px-4","d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","65px","height","65px",3,"src"],[1,"ms-3"],[1,"mb-1"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded",3,"routerLink"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded","text-danger",3,"click"],["aria-label","Select page","showFirstLastButtons","",1,"mat-paginator",3,"length","pageSizeOptions","pageSize","page"]],template:function(e,r){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Books"),t.qZA(),t.TgZ(2,"table",1)(3,"thead",2)(4,"tr")(5,"th",3),t._uU(6,"Id"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"Book Name"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Actions"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,ie,3,3,"tr",6),t.YNc(13,se,14,4,"tr",7),t.TgZ(14,"tr")(15,"td",8),t.YNc(16,ae,2,5,"ng-container",9),t.qZA()()()()),2&e&&(t.xp6(12),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngForOf",null==r.books?null:r.books.items),t.xp6(3),t.Q6J("ngIf",r.books))},dependencies:[a.mk,a.sg,a.O5,h.rH,U.NW]}),o})()},{path:"book-edit/:id",component:(()=>{class o{constructor(e,r,n){this.route=e,this.bookService=r,this.router=n,this.loading=!0}ngOnInit(){this.bookService.getBookById(Number(this.route.snapshot.paramMap.get("id"))).subscribe({next:e=>{this.book=e,this.loading=!1},error:()=>{this.loading=!1,this.router.navigateByUrl("/admin")}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.gz),t.Y36(S),t.Y36(h.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-book-edit"]],decls:4,vars:4,consts:[[1,"text-center","mb-5"],[3,"ngClass"],[3,"book",4,"ngIf"],[3,"book"]],template:function(e,r){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Book"),t.qZA(),t._UZ(2,"div",1),t.YNc(3,ue,1,1,"app-book-form",2)),2&e&&(t.xp6(2),t.Q6J("ngClass",t.VKq(2,pe,r.loading)),t.xp6(1),t.Q6J("ngIf",r.book))},dependencies:[a.mk,a.O5,M]}),o})()},{path:"create-publisher",component:Vt},{path:"publisher-list",component:re},{path:"create-author",component:gt},{path:"author-list",component:xt},{path:"author-edit/:id",component:Tt}];let de=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(he),h.Bz]}),o})();var ge=u(7661);let me=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,de,ge.m]}),o})()}}]);